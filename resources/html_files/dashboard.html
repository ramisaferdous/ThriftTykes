<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link rel="stylesheet" href="/css_files/dashboard.css">
</head>
<body>
    <!-- Top Bar -->
    <header class="top-bar">
        <div class="logo">
            <h1>ThriftTykes</h1>
        </div>
        <div class="search-bar">
            <input type="text" id="search" placeholder="Search for products...">
            <button type="button">Search</button>
        </div>
        <nav class="nav-links">
            <a href="/dashboard">Dashboard</a>
            <a href="/my-shop">My Shop</a>
            <a href="/cart">Cart</a>
            <a href="/logout">Logout</a>
        </nav>
    </header>

    
    <section class="dashboard-container" id="product-list">
       
    </section>

    <script>
        async function fetchProducts() {
            try {
                const response = await fetch('/dashboard/products');
                const products = await response.json();

                const productList = document.getElementById('product-list');
                productList.innerHTML = ""; 

                products.forEach(product => {
                    const productCard = document.createElement('div');
                    productCard.classList.add('product-card');
                    productCard.innerHTML = `
                        <img src="${product.imageUrl || '/default.jpg'}" alt="${product.name}">
                        <h3>${product.name}</h3>
                        <p>Category: ${product.category}</p>
                        <p>Price: $${product.price}</p>
                         <p>Quantity: ${product.quantity}</p>
                        <p>Brand: ${product.brand}</p>
                        <p>Condition: ${product.condition}</p>
                        <button onclick="addToCart('${product.id}')">Add to Cart</button>
                    `;
                    productList.appendChild(productCard);
                });
            } catch (error) {
                console.error("Error fetching products:", error);
            }
        }

        async function addToCart(productId) {
        const response = await fetch('/cart/add', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ productId })
        });

        const result = await response.json();
        alert(result.message);

        
    }
        fetchProducts();
    </script>

   
</body>
</html>
